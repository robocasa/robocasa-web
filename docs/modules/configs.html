
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configs &#8212; robomimic 0.2.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../static/pygments.css" />
    <link rel="stylesheet" href="../static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../static/documentation_options.js"></script>
    <script src="../static/jquery.js"></script>
    <script src="../static/underscore.js"></script>
    <script src="../static/doctools.js"></script>
    <script src="../static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Environments" href="environments.html" />
    <link rel="prev" title="Models" href="models.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">robomimic 0.2.0 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/implemented_algorithms.html">
   Implemented Algorithms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/getting_started.html">
   Getting Started
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Datasets
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../datasets/overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../datasets/robomimic_v0.1.html">
   robomimic v0.1 (CoRL 2021)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../datasets/robosuite.html">
   robosuite Datasets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../datasets/d4rl.html">
   D4RL
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../datasets/momart.html">
   MOMART Datasets and Experiments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../datasets/roboturk_pilot.html">
   RoboTurk Pilot
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Pretrained Models
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../model_zoo/robomimic_v0.1.html">
   robomimic-v0.1
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/configs.html">
   Configuring and Launching Training Runs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/viewing_results.html">
   Logging and Viewing Training Results
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/hyperparam_scan.html">
   Running Hyperparameter Scans
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/reproducing_experiments.html">
   Reproducing Published Experiments and Results
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/dataset_contents.html">
   Dataset Contents and Visualization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/using_pretrained_models.html">
   Using Pretrained Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/observations.html">
   Multimodal Observations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/custom_algorithms.html">
   Implementing Custom Algorithms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/tensor_collections.html">
   Operations over Tensor Collections
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modules
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dataset.html">
   SequenceDataset
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="algorithms.html">
   Algorithms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="models.html">
   Models
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Configs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="environments.html">
   Environments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Source API
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api/robomimic.html">
   robomimic package
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/robomimic.algo.html">
     robomimic.algo package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/robomimic.config.html">
     robomimic.config package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/robomimic.envs.html">
     robomimic.envs package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/robomimic.models.html">
     robomimic.models package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../api/robomimic.utils.html">
     robomimic.utils package
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Miscellaneous
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../miscellaneous/troubleshooting.html">
   Troubleshooting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../miscellaneous/contributing.html">
   Contributing Guidelines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../miscellaneous/team.html">
   Team
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../miscellaneous/acknowledgments.html">
   Acknowledgments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../miscellaneous/references.html">
   Projects using robomimic
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../sources/modules/configs.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#config-factory">
   Config Factory
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#config-structure">
   Config Structure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#config-locking">
   Config Locking
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#minimum-example">
   Minimum Example
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Configs</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#config-factory">
   Config Factory
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#config-structure">
   Config Structure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#config-locking">
   Config Locking
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#minimum-example">
   Minimum Example
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="configs">
<h1>Configs<a class="headerlink" href="#configs" title="Permalink to this headline">#</a></h1>
<p>Configs are instances of the <code class="docutils literal notranslate"><span class="pre">Config</span></code> class defined in <code class="docutils literal notranslate"><span class="pre">config/config.py</span></code>. The implementation is largely based on <a class="reference external" href="https://github.com/mewwts/addict">addict</a>, which makes working with nested dictionaries convenient. At their core, configs are essentially nested dictionaries (similar to loaded json objects), with an easy way to access and set nested keys by using attributes. See the example below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">robomimic.config</span> <span class="kn">import</span> <span class="n">Config</span>

<span class="c1"># normal way to create nested dictionaries and read values</span>
<span class="n">c</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">c</span><span class="p">[</span><span class="s2">&quot;experiment&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">c</span><span class="p">[</span><span class="s2">&quot;experiment&quot;</span><span class="p">][</span><span class="s2">&quot;save&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">c</span><span class="p">[</span><span class="s2">&quot;experiment&quot;</span><span class="p">][</span><span class="s2">&quot;save&quot;</span><span class="p">][</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;save enabled: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;experiment&quot;</span><span class="p">][</span><span class="s2">&quot;save&quot;</span><span class="p">][</span><span class="s2">&quot;enabled&quot;</span><span class="p">]))</span>

<span class="c1"># can use dot syntax instead of key lookup to create nested dictionaries</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Config</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">save</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># can also use dot syntax to access attributes</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;save enabled: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">experiment</span><span class="o">.</span><span class="n">save</span><span class="o">.</span><span class="n">enabled</span><span class="p">))</span>
</pre></div>
</div>
<p>It’s easy to go back and forth between <code class="docutils literal notranslate"><span class="pre">Config</span></code> objects and jsons as well, which is convenient when saving config objects to disk (this happens when generating new config jsons for training, and when saving the config in a model checkpoint), and loading configs from jsons.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># dump config as a json string</span>
<span class="n">json_string</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">dump</span><span class="p">()</span>

<span class="c1"># dump config to a json file</span>
<span class="n">c</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;c.json&quot;</span><span class="p">)</span>

<span class="c1"># load config from json</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="n">json_dic</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_string</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="n">json_dic</span><span class="p">)</span>
</pre></div>
</div>
<p>All algorithm config classes (one class per algorithm type) are subclasses of the <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> class (defined in <code class="docutils literal notranslate"><span class="pre">config/base_config.py</span></code>), which is a subclass of the general <code class="docutils literal notranslate"><span class="pre">Config</span></code> class. The algorithm config classes are kept in a global registry (more details on this later). The <code class="docutils literal notranslate"><span class="pre">generate_config_templates.py</span></code> script uses the functionality demonstrated above to easily generate template config jsons for each algorithm, by instantiating the default config object per class. <strong>This script should be run any time changes are made to default settings, or new config settings are added.</strong> We reproduce the code snippet below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">robomimic</span>
<span class="kn">from</span> <span class="nn">robomimic.config</span> <span class="kn">import</span> <span class="n">get_all_registered_configs</span>

<span class="c1"># store template config jsons in this directory</span>
<span class="n">target_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">robomimic</span><span class="o">.</span><span class="n">__path__</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;exps/templates/&quot;</span><span class="p">)</span>

<span class="c1"># iterate through registered algorithm config classes</span>
<span class="n">all_configs</span> <span class="o">=</span> <span class="n">get_all_registered_configs</span><span class="p">()</span>
<span class="k">for</span> <span class="n">algo_name</span> <span class="ow">in</span> <span class="n">all_configs</span><span class="p">:</span>
    <span class="c1"># make config class for this algorithm</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">all_configs</span><span class="p">[</span><span class="n">algo_name</span><span class="p">]()</span>
    <span class="c1"># dump to json</span>
    <span class="n">json_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">target_dir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.json&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">algo_name</span><span class="p">))</span>
    <span class="n">c</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">json_path</span><span class="p">)</span>
</pre></div>
</div>
<p>We now go over the general structure of algorithm config classes by dicusssing the <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> class, which has more specific functionality than the general <code class="docutils literal notranslate"><span class="pre">Config</span></code> class for use with this repository.</p>
<div class="section" id="config-factory">
<h2>Config Factory<a class="headerlink" href="#config-factory" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> class has a property and classmethod called <code class="docutils literal notranslate"><span class="pre">ALGO_NAME</span></code> that must be filled out by all subclasses – this should correspond to the algorithm name for each config, and should match the algorithm name that is passed to <code class="docutils literal notranslate"><span class="pre">register_algo_factory_func</span></code> at the top of each algorithm implementation file. For example, for <code class="docutils literal notranslate"><span class="pre">BCConfig</span></code>, <code class="docutils literal notranslate"><span class="pre">ALGO_NAME</span> <span class="pre">=</span> <span class="pre">&quot;bc&quot;</span></code>. This property is important in order to make sure that all configs that subclass <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> get registered into the <code class="docutils literal notranslate"><span class="pre">REGISTERED_CONFIGS</span></code> global registry (<code class="docutils literal notranslate"><span class="pre">ALGO_NAME</span></code> is used as a key to register the class into the registry). This also allows the <code class="docutils literal notranslate"><span class="pre">config_factory</span></code> function to easily create the appropriate config class for an algorithm – <strong>this is the standard entry point for creating config objects in the codebase</strong>. While config jsons can also be used to load configs during training (as discussed in the Quick Start section of the documentation), the <code class="docutils literal notranslate"><span class="pre">config_factory</span></code> function is still used to create an initial config object, which is then updated (see the example below).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">robomimic.config</span> <span class="kn">import</span> <span class="n">config_factory</span>

<span class="c1"># base config for algorithm with default values</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">config_factory</span><span class="p">(</span><span class="s2">&quot;bc&quot;</span><span class="p">)</span>

<span class="c1"># update defaults with config json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/path/to/config.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">ext_config_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ext_config_json</span><span class="p">)</span>
</pre></div>
</div>
<p>At test-time, when loading a model from a checkpoint, the config is restored by reading the json string from the checkpoint, and then using it to instantiate the config. An example is below (modified slightlyt from <code class="docutils literal notranslate"><span class="pre">config_from_checkpoint</span></code> in <code class="docutils literal notranslate"><span class="pre">utils/file_utils.py</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">robomimic.utils.file_utils</span> <span class="k">as</span> <span class="nn">FileUtils</span>
<span class="n">ckpt_dict</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="o">.</span><span class="n">load_dict_from_checkpoint</span><span class="p">(</span><span class="s2">&quot;path/to/ckpt.pth&quot;</span><span class="p">)</span>
<span class="n">config_json</span> <span class="o">=</span> <span class="n">ckpt_dict</span><span class="p">[</span><span class="s2">&quot;config&quot;</span><span class="p">]</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">config_factory</span><span class="p">(</span><span class="n">ckpt_dict</span><span class="p">[</span><span class="s2">&quot;algo_name&quot;</span><span class="p">],</span> <span class="n">dic</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">config_json</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="config-structure">
<h2>Config Structure<a class="headerlink" href="#config-structure" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> class (and all subclasses) have 4 important sections that need to be filled out – each is a method of the config class. See <code class="docutils literal notranslate"><span class="pre">config/base_config.py</span></code> (and the relevant algorithm config files like <code class="docutils literal notranslate"><span class="pre">config/bc_config.py</span></code>) for details on the specific settings under each section.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">experiment_config(self)</span></code></p>
<ul>
<li><p>This function populates the <code class="docutils literal notranslate"><span class="pre">config.experiment</span></code> attribute of the config, which has several experiment settings such as the name of the training run, whether to do logging, whether to save models (and how often), whether to render videos, and whether to do rollouts (and how often). The <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> class has a default implementation that usually doesn’t need to be overriden.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">train_config(self)</span></code></p>
<ul>
<li><p>This function populates the <code class="docutils literal notranslate"><span class="pre">config.train</span></code> attribute of the config, which has several settings related to the training process, such as the dataset to use for training, and how the data loader should load the data. The <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> class has a default implementation that usually doesn’t need to be overriden.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">algo_config(self)</span></code></p>
<ul>
<li><p>This function populates the <code class="docutils literal notranslate"><span class="pre">config.algo</span></code> attribute of the config, and is given to the <code class="docutils literal notranslate"><span class="pre">Algo</span></code> subclass (see <code class="docutils literal notranslate"><span class="pre">algo/algo.py</span></code>) for each algorithm through the <code class="docutils literal notranslate"><span class="pre">algo_config</span></code> argument to the constructor. Any parameter that an algorithm needs to determine its training and test-time behavior should be populated here. This function should be implemented by every subclass.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">observation_config(self)</span></code></p>
<ul>
<li><p>This function populates the <code class="docutils literal notranslate"><span class="pre">config.observation</span></code> attribute of the config, and is given to the <code class="docutils literal notranslate"><span class="pre">Algo</span></code> subclass (see <code class="docutils literal notranslate"><span class="pre">algo/algo.py</span></code>) for each algorithm through the <code class="docutils literal notranslate"><span class="pre">obs_config</span></code> argument to the constructor. This portion of the config is used to specify what observation modalities should be used by the networks for training, and how the observation modalities should be encoded by the networks. While the <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> class has a default implementation that usually doesn’t need to be overriden, certain algorithm configs may choose to, in order to have seperate configs for different networks in the algorithm.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="config-locking">
<h2>Config Locking<a class="headerlink" href="#config-locking" title="Permalink to this headline">#</a></h2>
<p>To prevent accidental config modification, each <code class="docutils literal notranslate"><span class="pre">Config</span></code> object implements a two-level locking mechanism: <em>key-locked</em> and <em>all-locked</em>. A <code class="docutils literal notranslate"><span class="pre">Config</span></code> object can be put into the <em>key-locked</em> state by calling <code class="docutils literal notranslate"><span class="pre">config.lock_keys()</span></code>. Under the <em>key-locked</em>  state, a <code class="docutils literal notranslate"><span class="pre">Config</span></code> object does not allow adding new keys but only changing the values of existing keys. A <code class="docutils literal notranslate"><span class="pre">Config</span></code> object can be put into the <em>all-locked</em> state by calling <code class="docutils literal notranslate"><span class="pre">config.lock()</span></code>. In this state, the object does not allow adding new keys nor changing existing values.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">Config</span></code> objects that inherit the constructor of <code class="docutils literal notranslate"><span class="pre">BaseConfig</span></code> are <em>key-locked</em> by default. Upon finishing constructing the object, it is recommended to put the config object into the <em>all-locked</em> state by calling <code class="docutils literal notranslate"><span class="pre">config.lock()</span></code>. <code class="docutils literal notranslate"><span class="pre">Config</span></code> objects also implement context manager functions that allow convenient and controlled config modification within a scope.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">value_unlocked()</span></code></p>
<ul>
<li><p>This context scope allows values of existing keys to be modified if the <code class="docutils literal notranslate"><span class="pre">Config</span></code> object is <em>all-locked</em>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unlocked()</span></code></p>
<ul>
<li><p>This context scope allows new keys to be added as well as values of existing keys to be modified, regardless of the locking state.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="minimum-example">
<h2>Minimum Example<a class="headerlink" href="#minimum-example" title="Permalink to this headline">#</a></h2>
<p>Please see the <a class="reference external" href="../tutorials/configs.html">config tutorial</a> for more information on how to use the Config object, and examples on how the locking mechanism works.</p>
</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="models.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Models</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="environments.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Environments</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Ajay Mandlekar, Danfei Xu, Josiah Wong, Soroush Nasiriany, Chen Wang<br/>
  
      &copy; Copyright 2022, Ajay Mandlekar, Danfei Xu, Josiah Wong, Soroush Nasiriany, Chen Wang.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>